# Парсер статистики ДТП с stat.gibdd.ru

Инструмент для иследователей, который позволяет скачивать актуальные подробные данные о ДТП с [сайта](http://stat.gibdd.ru/) статистики ДТП ГИБДД. 

Уже загруженные данные находятся в папке [data](https://github.com/Shorstko/GibddStat/tree/master/data). Т.к. guthub не поддерживает файлы размером больше 25 Мб, выгрузки за 2015-2017 состоят из двух архиве. В архивах с названием \*part2 находится файл лога (по нему можно посмотреть, для каких муниципальных образований (районы города и пр.) отсутствуют данные).

![](https://github.com/Shorstko/GibddStat/blob/master/image/title.png)

Работает из командной строки. Базовый синтаксис: 
> GibddStatParser.py [--year] [--month] [--regcode] [--dir] [--updatecodes] [--help]

`--year` год, за который скачивается статистика. если год не указан, скачивается статистика за текущий год

`--month` месяц, за который скачивается статистика. если не указан, скачивается статистика за все прошедшие месяцы года

`--regcode` ОКАТО-код региона. номера кодов регионов можно посмотреть в справочнике кодов регионов [regions.json](https://github.com/Shorstko/GibddStat/blob/master/regions.json) (параметр `id`)

`--dir` папка, в которую скачивается статистика. по умолчанию `dtpdata`

`--updatecodes` обновить ОКАТО-коды регионов с сайта stat.gibdd.ru. по умолчанию обновление отключено (`--updatecodes n`)

Примеры вызова парсера:

`GibddStatParser.py --year 2018` : скачать все ДТП за 2018 год. для текущего года скачиваются все месяцы минус текущий. для прошедших лет скачиваются 12 месяцев

`GibddStatParser.py --year 2018 --month 4` : скачать все ДТП за апрель 2018 года

`GibddStatParser.py --year 2018 --regcode 45` : скачать все ДТП по Москве за 2018 год. 45 - ОКАТО-код г.Москва

`GibddStatParser.py --year 2018 --updatecodes y` : скачать все ДТП за 2018 год и обновить справочник кодов регионов
